<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Poll State | node-red-contrib-home-assistant-websocket</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/node-red-contrib-home-assistant-websocket/favicon.ico">
    <meta name="description" content="Node-RED integration with Home Assistant through the WebSocket and HTTP API">
    
    <link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.d8a71888.css" as="style"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/app.96ddebc6.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/2.3a141e40.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/47.e63c9b14.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/16.e994fac2.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/10.4890446f.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/11.171be12d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/12.5d26d32c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/13.4260b3a4.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/14.09ebc43c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/15.15782895.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/17.05718f07.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/18.a18ffbca.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/19.66a7c3d4.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/20.5ae58e28.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/21.be44d948.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/22.a3ff815a.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/23.b7482b70.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/24.ddaa5684.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/25.4af7d2dc.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/26.6ce48993.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/27.e5aecb0e.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/28.0889173f.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/29.82278116.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/3.e72c9aba.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/30.4da80c82.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/31.560bf89c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/32.5f5a5a58.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/33.bf3b6769.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/34.ed7e4710.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/35.1961a512.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/36.efb8f9c6.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/37.4869e6f3.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/38.6c3cf737.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/39.af8664a0.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/4.0bdcb17c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/40.deac5691.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/41.226921f5.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/42.3d349467.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/43.e1bc1d60.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/44.6e6c5e95.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/45.343bd722.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/46.846d724b.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/48.8ac461e9.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/49.900eb737.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/5.1440614d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/50.436d5ab2.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/51.b7c3aeb2.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/52.0ecbb7a5.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/53.8e14980b.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/54.0599aa42.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/55.6579a4c4.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/6.457cd93c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/7.b38cdf22.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/8.c443c5ce.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/9.890001b0.js">
    <link rel="stylesheet" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.d8a71888.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/node-red-contrib-home-assistant-websocket/" class="home-link router-link-active"><!----> <span class="site-name">node-red-contrib-home-assistant-websocket</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link router-link-active">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link">
  Cookbook
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/scrubber/" class="nav-link">
  Scrubber
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link router-link-active">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link">
  Cookbook
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/scrubber/" class="nav-link">
  Scrubber
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Nodes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-red-contrib-home-assistant-websocket/node/API.html" class="sidebar-link">API</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/call-service.html" class="sidebar-link">Call Service</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/config-server.html" class="sidebar-link">Config Server</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/current-state.html" class="sidebar-link">Current State</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/entity.html" class="sidebar-link">Entity</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/events-all.html" class="sidebar-link">Events: all</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/events-state.html" class="sidebar-link">Events: state</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/fire-event.html" class="sidebar-link">Fire Event</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/get-entities.html" class="sidebar-link">Get Entities</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/get-history.html" class="sidebar-link">Get History</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html" aria-current="page" class="active sidebar-link">Poll State</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#configuration" class="sidebar-link">Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#entity-id" class="sidebar-link">Entity ID</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#update-interval" class="sidebar-link">Update Interval</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#if-state" class="sidebar-link">If State</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#state-type" class="sidebar-link">State Type</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#output-initially" class="sidebar-link">Output Initially</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#expose-to-home-assistant" class="sidebar-link">Expose to Home Assistant</a></li></ul></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#outputs" class="sidebar-link">Outputs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#topic" class="sidebar-link">topic</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#payload-data" class="sidebar-link">payload.data</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#payload-data-timesincechanged" class="sidebar-link">payload.data.timeSinceChanged</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#payload-data-timesincechangedms" class="sidebar-link">payload.data.timeSinceChangedMs</a></li></ul></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#references" class="sidebar-link">References</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/node/poll-state.html#changelog" class="sidebar-link">Changelog</a></li></ul></li><li><a href="/node-red-contrib-home-assistant-websocket/node/render-template.html" class="sidebar-link">Render Template</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/time.html" class="sidebar-link">Time</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/trigger-state.html" class="sidebar-link">Trigger: state</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/wait-until.html" class="sidebar-link">Wait Until</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/webhook.html" class="sidebar-link">Webhook</a></li><li><a href="/node-red-contrib-home-assistant-websocket/node/zone.html" class="sidebar-link">Zone</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="poll-state"><a href="#poll-state" class="header-anchor">#</a> Poll State</h1> <p>Polls for the state at regular intervals, optionally also outputting at the start and when the state changes. Useful for either alert for non-communicating devices (time since change &gt; 1 day for example) or dashboard graphs with consistent interval charts</p> <h2 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h2> <h3 id="entity-id"><a href="#entity-id" class="header-anchor">#</a> Entity ID <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>required</span></h3> <p>The entity id of the entity to poll for.</p> <h3 id="update-interval"><a href="#update-interval" class="header-anchor">#</a> Update Interval</h3> <ul><li>Type: <code>number</code></li></ul> <p>The amount of time between checking/sending updates.</p> <h3 id="if-state"><a href="#if-state" class="header-anchor">#</a> If State</h3> <ul><li>Type: <code>string</code></li></ul> <p>If the conditional statement is evaluated as true send the message to the first output otherwise send it to the second output. If blank there will only be one output.</p> <p><strong>Also see:</strong></p> <ul><li><a href="/node-red-contrib-home-assistant-websocket/guide/conditionals.html">Conditionals</a></li></ul> <h3 id="state-type"><a href="#state-type" class="header-anchor">#</a> State Type</h3> <ul><li>Type: <code>string</code></li></ul> <p>Convert the state of the entity to the selected type. Boolean will be converted to true based on if the string is equal by default to (y|yes|true|on|home|open). Original value stored in msg.data.original_state</p> <h3 id="output-initially"><a href="#output-initially" class="header-anchor">#</a> Output Initially</h3> <ul><li>Type: <code>boolean</code></li></ul> <p>Output once on startup/deploy then on each interval</p> <h3 id="expose-to-home-assistant"><a href="#expose-to-home-assistant" class="header-anchor">#</a> Expose to Home Assistant</h3> <ul><li>Type: <code>boolean</code></li></ul> <p>Creates a switch within Home Assistant to enable/disable this node. This feature requires <a href="https://github.com/zachowj/hass-node-red" target="_blank" rel="noopener noreferrer">Node-RED custom integration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to be installed in Home Assistant</p> <h2 id="outputs"><a href="#outputs" class="header-anchor">#</a> Outputs</h2> <h3 id="topic"><a href="#topic" class="header-anchor">#</a> topic</h3> <ul><li>Type: <code>string</code></li></ul> <p>entity_id of changed entity</p> <h3 id="payload-data"><a href="#payload-data" class="header-anchor">#</a> payload.data</h3> <ul><li>Type: <code>object</code></li></ul> <p>The last known state of the entity</p> <h3 id="payload-data-timesincechanged"><a href="#payload-data-timesincechanged" class="header-anchor">#</a> payload.data.timeSinceChanged</h3> <ul><li>Type: <code>string</code></li></ul> <p>Human readable format string of time since last updated, example &quot;1 hour ago&quot;</p> <h3 id="payload-data-timesincechangedms"><a href="#payload-data-timesincechangedms" class="header-anchor">#</a> payload.data.timeSinceChangedMs</h3> <ul><li>Type: <code>number</code></li></ul> <p>Number of milliseconds since last changed</p> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ul><li><a href="https://home-assistant.io/docs/configuration/state_object/" target="_blank" rel="noopener noreferrer">Home Assistant State Objects<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="changelog"><a href="#changelog" class="header-anchor">#</a> Changelog</h2> <h4 id="version-1"><a href="#version-1" class="header-anchor">#</a> Version 1</h4> <ul><li>&quot;if state&quot;/&quot;halt if&quot; will now send the message to the first output if true and to the second if not. The old behavior, sending the message to the second output if true, will continue to be in place until you edit one of the existing nodes via the UI and at that time the outputs will automatically be switched.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket/edit/dev/docs/node/poll-state.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/30/2019, 9:59:48 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/node-red-contrib-home-assistant-websocket/node/get-history.html" class="prev">
        Get History
      </a></span> <span class="next"><a href="/node-red-contrib-home-assistant-websocket/node/render-template.html">
        Render Template
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/node-red-contrib-home-assistant-websocket/assets/js/app.96ddebc6.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/2.3a141e40.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/47.e63c9b14.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/16.e994fac2.js" defer></script>
  </body>
</html>
